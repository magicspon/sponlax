!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.sponlax=n()}(this,function(){"use strict";function e(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},o=function(){var n=this;this.defaults={rootMargin:"0px",threshold:0,shouldUnObserve:function(){return!1},onEnter:function(){},onLeave:function(){},inview:function(){}},this.prevFrame=-1,this.within=function(e){return"true"===e.getAttribute("data-inview")},this.loop=function(){if(window.pageYOffset!==n.prevFrame){n.prevFrame=window.pageYOffset;var t=n.options.inview;[].concat(e(n.elements)).forEach(t),n.handle=requestAnimationFrame(n.loop)}else n.handle=requestAnimationFrame(n.loop)},this.onIntersection=function(){return function(e,t){var o=n.options,r=o.shouldUnObserve,i=o.onEnter,a=o.onLeave;e.forEach(function(e){var o=e.target;e.isIntersecting?(r(o)&&t.unobserve(o),o._props=e,n.elements.add(o),i(o),!n.within(o)&&node.setAttribute("data-inview","true")):(n.within(o)&&node.setAttribute("data-inview","false"),a(o),n.elements.delete(o))}),n.elements.size>0&&null===n.handle&&n.loop(),0===n.elements.length&&(cancelAnimationFrame(n.handle),n.handle=null)}}};return function r(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-inview]",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,r),o.call(this),this.options=t({},this.defaults,a);var s=this.options,l=s.rootMargin,u=s.threshold,f=new IntersectionObserver(this.onIntersection(),{rootMargin:l,threshold:u});this.nodes=[].concat(e(document.querySelectorAll(i))).map(function(e){return f.observe($node),e}),this.elements=new Set,this.handle=null}});
